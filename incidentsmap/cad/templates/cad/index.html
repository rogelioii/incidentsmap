<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Test Code for Prominent Edge</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"
   integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
   crossorigin=""/>

  <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"
   integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og=="
   crossorigin=""></script>
</head>
<body>
  <h1>Incident Map</h1>
  
  <form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <input type="file" name="myfile">
    <button type="submit">Upload</button>
  </form>
  
  {% if uploaded_file_url %}
    <p>File uploaded at: <a href="{{ uploaded_file_url }}">{{ uploaded_file_url }}</a></p>
  {% endif %}

  <div id="mapid" style="width: 1920px; height: 1080px;"></div>
  <!-- add javascript here -->
  <script type="text/javascript">
    const mymap = L.map('mapid').setView([37.466513, -77.428683], 13);
    //const incidentMarker = L.marker([0,0]).addTo(mymap);
    
    L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1Ijoicm9nZWxpb2lpIiwiYSI6ImNqemM1YmlmZjAwOWEzbXFuaWRpNjkxbGsifQ.WL_u767MNur9JNymWvh_5Q', {
      attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
      maxZoom: 18,
      id: 'mapbox.streets',
      accessToken: 'pk.eyJ1Ijoicm9nZWxpb2lpIiwiYSI6ImNqemM1YmlmZjAwOWEzbXFuaWRpNjkxbGsifQ.WL_u767MNur9JNymWvh_5Q'
    }).addTo(mymap);
    
    const marker = L.marker([37.466513, -77.428683]).addTo(mymap);
    marker.bindPopup("<b>Hello world!</b><br>I am a popup.").openPopup();
    
    var polygon = L.polygon([
      [37.541885, -77.440624],
      [37.522687, -77.452658],
      [37.542342, -77.44217]
    ]).addTo(mymap);

  </script>
</body>
</html>